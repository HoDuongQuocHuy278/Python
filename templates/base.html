<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Trao đổi đồ cũ{% endblock %}</title>

  <!-- Bootstrap & FontAwesome -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <!-- CSS riêng (nếu bạn có) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">

  <style>
    body { background:#f5f7fb; }
    /* ========= Shopee-like Header ========= */
    .tdc-header{color:#fff;background:linear-gradient(180deg,#f53d2d 0%,#ff7337 100%);}
    .tdc-topbar{font-size:13px;opacity:.95}
    .tdc-topbar .container{display:flex;justify-content:space-between;gap:16px;padding:6px 0}
    .tdc-topbar a{color:#fff;text-decoration:none;opacity:.95}
    .tdc-topbar a:hover{opacity:1;text-decoration:underline}

    .tdc-main .container{display:flex;align-items:center;gap:18px;padding:14px 0}
    .tdc-brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#fff}
    .tdc-bag{width:40px;height:40px;border-radius:8px;border:2px solid #fff;display:flex;align-items:center;justify-content:center}
    .tdc-brand span{font-size:26px;font-weight:800;letter-spacing:.2px}

    .tdc-search{display:flex;align-items:center;flex:1;gap:0}
    .tdc-search input{flex:1;height:42px;border:0;border-radius:8px 0 0 8px;padding:0 14px;font-size:15px}
    .tdc-search button{height:42px;border:0;border-radius:0 8px 8px 0;padding:0 16px;background:#ff6433;color:#fff}
    .tdc-search button i{font-size:16px}

    .tdc-actions{display:flex;align-items:center;gap:18px}
    .tdc-actions a{color:#fff;text-decoration:none}
    .tdc-cart{position:relative;display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:10px;border:2px solid rgba(255,255,255,.65)}
    .tdc-dot{position:absolute;top:6px;right:6px;width:8px;height:8px;background:#fff;border-radius:50%}

    .tdc-subnav{background:linear-gradient(180deg,#ff7337 0%,#ff7f45 100%);font-size:14px}
    .tdc-subnav .container{display:flex;gap:18px;overflow:auto;white-space:nowrap;padding:6px 0}
    .tdc-subnav a{color:#fff;text-decoration:none;opacity:.95}
    .tdc-subnav a:hover{opacity:1;text-decoration:underline}

    /* Flash messages spacing */
    .flash-wrap { padding: 12px 0; }
    @media (max-width: 992px){ .tdc-actions .tdc-aux{display:none} }
    @media (max-width: 576px){ .tdc-topbar{display:none} }
  </style>

  {% block extra_head %}{% endblock %}
  {% block head %}{% endblock %}
</head>
<body>

  {# ========= Header MẶC ĐỊNH cho mọi trang ========= #}
  {% block header %}
  <header class="tdc-header">
    <!-- Topbar links -->
    <div class="tdc-topbar">
      <div class="container">
        <div class="d-flex gap-3 flex-wrap">
          <a href="#">Kênh Người Bán</a><span>|</span>
          <a href="#">Trở thành Người bán</a><span>|</span>
          <a href="#">Tải ứng dụng</a><span>|</span>
          <span class="tdc-aux">Kết nối
            <i class="fa-brands fa-facebook ms-1"></i>
            <i class="fa-brands fa-instagram ms-1"></i>
          </span>
        </div>
        <div class="d-flex gap-3 flex-wrap">
          <a href="#"><i class="fa-regular fa-bell me-1"></i> Thông Báo</a>
          <a href="#"><i class="fa-regular fa-circle-question me-1"></i> Hỗ Trợ</a>
          <a href="#"><i class="fa-solid fa-globe me-1"></i> Tiếng Việt</a>
          {% if is_logged_in %}
            <span>Xin chào, {{ current_user.fullname }}</span>
            <a href="{{ url_for('logout') }}">Đăng Xuất</a>
          {% else %}
            <a href="{{ url_for('register') }}">Đăng Ký</a>
            <a href="{{ url_for('login') }}">Đăng Nhập</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Main brand + search + cart -->
    <div class="tdc-main">
      <div class="container">
        <a class="tdc-brand" href="{{ url_for('home') }}">
          <div class="tdc-bag"><i class="fa-solid fa-recycle"></i></div>
          <span>Trao đổi đồ cũ</span>
        </a>

        <form class="tdc-search" role="search" onsubmit="return false;">
          <input type="text" placeholder="Trao đổi đồ cũ bao ship 0Đ - Đăng ký ngay!">
          <button type="submit" aria-label="Tìm">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>

        <div class="tdc-actions">
          <a class="tdc-cart" href="{{ url_for('profile') if is_logged_in else url_for('login') }}">
            <i class="fa-solid fa-cart-shopping"></i>
            <span class="tdc-dot"></span>
          </a>
        </div>
      </div>
    </div>

    <!-- Subnav quick links -->
    <div class="tdc-subnav">
      <div class="container">
        <a href="#">Ốp Đẹp</a>
        <a href="#">Bộ Quần Áo Nữ Mùa Hè</a>
        <a href="#">Áo Khoác</a>
        <a href="#">Quạt Điện Cầm Tay</a>
        <a href="#">Giày Quai Hậu Nữ</a>
        <a href="#">Bánh Mix</a>
        <a href="#">Kính Gương</a>
        <a href="#">Túi Vải</a>
      </div>
    </div>
  </header>
  {% endblock %}

  {# ========= Flash messages ========= #}
  <div class="container flash-wrap">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="mb-2">
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
  </div>

  {# ========= Nội dung trang ========= #}
  <main id="main">
    {% block content %}{% endblock %}
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
